<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إضافة اشتراك</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../Design/css/data.css">
    <style>
        body {
            background-color: #f0f4f8;
            direction: rtl;
            text-align: right;
            font-family: 'Tahoma', sans-serif;
        }
        .top-bar {
            background-color: #007bff;
            color: white;
            padding: 10px;
        }
        .card-header {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .btn-custom {
            background-color: #28a745;
            color: white;
        }
        .form-check-label {
            margin-right: 8px;
        }
        .form-check {
            margin-bottom: 10px;
        }
        .input-group-text {
            background-color: #f8f9fa;
        }
        .editor-toolbar {
            
            background-color: #f8f9fa;
            padding: 5px;
            border: 1px solid #ced4da;
            border-radius: 5px;
        }
        .editor-toolbar .btn {
            padding: 5px 10px;
        }
        .editor-content {
            border: 1px solid #ced4da;
            padding: 10px;
            min-height: 100px;
            border-radius: 5px;
            margin-top: 10px;
        }
        /* إضافة مسافة بين label و combox */
        .form-group label + select, 
        .form-group label + input, 
        .form-group label + .input-group {
            margin-top: 0.25rem;
        }
        .table th, .table td {
            text-align: center;
            vertical-align: middle;
        }
        .table-responsive {
            margin-top: 20px;
        }
        .form-check-label {
        margin-right: 20px; /* يمكنك تعديل القيمة حسب المسافة التي ترغب بها */
    }
    .dropdown-search {
            position: relative;
            width: 300px;
        }

        .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 200px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
    }

    /* نعرض القائمة عندما يتم فتحها */
    .dropdown-search.open .dropdown-content {
        display: block;
    }


        .dropdown-content input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .dropdown-content .add-new-product {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #007bff;
            cursor: pointer;
            font-weight: bold;
        }


.dropdown-search:focus-within .dropdown-content {
    display: block;
}

        .dropdown-content .add-new-product i {
            margin-left: 5px;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin-left: 5px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- الشريط العلوي -->
    <div class="top-bar d-flex justify-content-between align-items-center">
        <div>
            <div class="dropdown d-inline">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="previewDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    معاينة
                </button>
                <div class="dropdown-menu" aria-labelledby="previewDropdown">
                    <a class="dropdown-item" href="#">عن طريق المتصفح</a>
                    <a class="dropdown-item" href="#">PDF</a>
                </div>
            </div>
            <button class="btn btn-success ml-2">حفظ</button>
        </div>
        <div>
            <a href="#" class="text-white">الذهاب إلى الموقع</a> | 
            <a href="#" class="text-white">مساعدة</a>
        </div>
    </div>

    <!-- محتوى الصفحة -->
    <div class="container mt-4">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="mb-0">خيارات الإصدار الآلي</h5>
            </div>
            
    <div class="container mt-3">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoice-template" class="form-label">قالب الفاتورة</label>
                    <select id="invoice-template" class="form-control">
                        <option selected>التصميم الافتراضي للفاتورة</option>
                        <option>التصميم 1 للفاتورة</option>
                        <option>التصميم 2 للفاتورة</option>
                        <option>التصميم 3 للفاتورة</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
            <div class="card-body">
                <!-- السطر الأول -->
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="subscription">الاشتراك</label>
                            <select id="subscription" class="form-control">
                                <option>اختر اشتراك</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="issue-every">إضافة فاتورة كل</label>
                            <div class="input-group">
                                <input type="number" id="issue-every" class="form-control" value="1">
                                
                                <div class="form-group">
                                    <select class="form-control" onchange="toggleCustomDate(this)">
                                        <option value="custom">ايام </option>
                                        <option value="last_month">اسابيع </option>
                                        <option value="last_year"> شهور</option>
                                        <option value="last_year"> سنين</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="recurrence">عدد مرات التكرار</label>
                            <div class="input-group">
                                <input type="number" id="recurrence" class="form-control" value="1">
                                <div class="input-group-append">
                                    <span class="input-group-text">مرات</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- السطر الثاني -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="first-invoice-date">تاريخ أول فاتورة</label>
                            <input type="text" id="deliveryStartDate" class="form-control" placeholder="" style="width:100%;">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="issue-before">إصدار الفاتورة قبل</label>
                            <div class="input-group">
                                <input type="number" id="issue-before" class="form-control" value="0">
                                <div class="input-group-append">
                                    <span class="input-group-text">أيام</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- مربعات الخيار -->
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="isActive">
                            <label class="form-check-label ml-2" for="isActive">نشط؟</label>
                        </div>
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="sendCopy">
                            <label class="form-check-label ml-2" for="sendCopy">أرسل لي نسخة من الفاتورة المنشأة</label>
                        </div>
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="displayDates">
                            <label class="form-check-label ml-2" for="displayDates">عرض تاريخ "منذ" و"حتى" في الفاتورة</label>
                        </div>
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="autoPayment">
                            <label class="form-check-label ml-2" for="autoPayment">تفعيل الدفع التلقائي لهذه الفاتورة</label>
                        </div>
                    </div>
                    
                </div>

                <!-- الطريقة والعميل وشروط الدفع -->
                <div class="row align-items-center">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="method">الطريقة</label>
                            <select id="method" class="form-control">
                                <option>طباعة</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="client">العميل</label>
                            <div class="d-flex">
                                <select id="client" class="form-control">
                                    <option>اختر عميل</option>
                                </select>
                                <button class="btn btn-primary ml-2">جديد</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="payment-terms">شروط الدفع</label>
                            <div class="input-group">
                                <input type="number" id="payment-terms" class="form-control" placeholder="أدخل عدد الأيام">
                                <div class="input-group-append">
                                    <span class="input-group-text">أيام</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                

                <!-- الجدول --><div class="table-responsive">
    <table class="table table-bordered table-striped table-hover">
        <thead class="thead-light">
            <tr>
                <th scope="col">تحديد</th>
                <th scope="col">البند</th>
                <th scope="col">الوصف</th>
                <th scope="col">سعر الوحدة</th>
                <th scope="col">الكمية</th>
                <th scope="col">الخصم</th>
                <th scope="col">الضريبة 1</th>
                <th scope="col">الضريبة 2</th>
                <th scope="col">المجموع</th>
            </tr>
        </thead>
        <tbody id="invoice-table-body">
            <!-- الصف الأول كمثال -->
            <tr>
                <td><input type="checkbox" class="row-checkbox" oninput="calculateRowTotal(this)"></td>
                <td><input type="text" placeholder="البحث عن المنتجات" class="form-control" oninput="calculateRowTotal(this)"></td>
                <td><input type="text" class="form-control" placeholder="الوصف"></td>
                <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
                <td><input type="number" class="form-control" placeholder="0" oninput="calculateRowTotal(this)"></td>
                <td><input type="number" class="form-control" placeholder="0%" oninput="calculateRowTotal(this)"></td>
                <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
                <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
                <td><span class="row-total">0.00</span></td>
            </tr>
        </tbody>
    </table>
</div>

<!-- قسم الأزرار والإجمالي الكلي تحت الجدول -->
<div class="d-flex justify-content-between align-items-center mt-3">
    <div>
        <button class="btn btn-primary" onclick="addNewRow()"><i class="fas fa-plus"></i> إضافة</button>
        <button class="btn btn-warning" onclick="editRowAll()">تعديل</button>
        <button class="btn btn-danger" onclick="deleteSelectedRows()"><i class="fas fa-trash"></i> حذف</button>
    </div>
    <div>
        <strong>الإجمالي الكلي:</strong>
        <span id="grand-total">0.00</span>
    </div>
</div>

<script>
    function addNewRow() {
        const tableBody = document.getElementById("invoice-table-body");
        const newRow = document.createElement("tr");
        newRow.innerHTML = `
            <td><input type="checkbox" class="row-checkbox" oninput="calculateRowTotal(this)"></td>
            <td><input type="text" placeholder="البحث عن المنتجات" class="form-control"></td>
            <td><input type="text" class="form-control" placeholder="الوصف"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0%" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><span class="row-total">0.00</span></td>
        `;
        tableBody.appendChild(newRow);
    }

    function calculateRowTotal(element) {
        const row = element.closest("tr");
        
        const unitPrice = parseFloat(row.cells[3].querySelector("input").value) || 0;
        const quantity = parseFloat(row.cells[4].querySelector("input").value) || 0;
        const discount = parseFloat(row.cells[5].querySelector("input").value) || 0;
        const tax1 = parseFloat(row.cells[6].querySelector("input").value) || 0;
        const tax2 = parseFloat(row.cells[7].querySelector("input").value) || 0;

        const total = (unitPrice * quantity) - discount;
        const totalWithTax = total + (total * tax1 / 100) + (total * tax2 / 100);

        row.querySelector(".row-total").textContent = totalWithTax.toFixed(2);
        updateGrandTotal();
    }

    function updateGrandTotal() {
        let grandTotal = 0;
        document.querySelectorAll(".row-total").forEach(total => {
            grandTotal += parseFloat(total.textContent) || 0;
        });
        document.getElementById("grand-total").textContent = grandTotal.toFixed(2);
    }

    function deleteSelectedRows() {
        const rows = document.querySelectorAll("#invoice-table-body tr");
        rows.forEach(row => {
            if (row.querySelector(".row-checkbox").checked) {
                row.remove();
            }
        });
        updateGrandTotal();
    }

    function editRowAll() {
        const rows = document.querySelectorAll("#invoice-table-body tr");
        rows.forEach(row => {
            const inputs = row.querySelectorAll("input");
            inputs.forEach(input => input.toggleAttribute("disabled"));
        });
    }
</script>

            
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="discount-tab" data-toggle="tab" href="#discount" role="tab" aria-controls="discount" aria-selected="true">الخصم والتسوية</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="shipping-tab" data-toggle="tab" href="#shipping" role="tab" aria-controls="shipping" aria-selected="false">بيانات الشحن</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="documents-tab" data-toggle="tab" href="#documents" role="tab" aria-controls="documents" aria-selected="false">إرفاق المستندات</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="deposet-tab" data-toggle="tab" href="#deposet" role="tab" aria-controls="deposet" aria-selected="false">التنبيهات الآلية</a>
    </li>
</ul>

<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="discount" role="tabpanel" aria-labelledby="discount-tab">
        <div class="form-group row mt-3">
            <label class="col-sm-2 col-form-label">الخصم</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" placeholder="0.00">
            </div>
            <label class="col-sm-2 col-form-label">التسوية</label>
            <div class="col-sm-3">
                <select class="form-control">
                    <option>نسبة مئوية (%)</option>
                    <option>قيمة ثابتة</option>
                </select>
            </div>
        </div>
    </div>
    

    
    <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
        <div class="form-group row mt-3 d-flex align-items-center">
            
            <!-- بيانات الشحن -->
            <label class="col-form-label me-2">بيانات الشحن</label>
            <div class="flex-grow-1 me-3">
                <input type="text" class="form-control" placeholder="أدخل قيمة">
            </div>
        
            <!-- المستودع والقائمة المنسدلة -->
            <label for="warehouseSelect" class="col-form-label me-2 mb-0">المستودع</label>
            <div class="flex-grow-1 me-3">
                <select class="form-control" id="warehouseSelect">
                    <option>المستودع الرئيسي</option>
                    <option>مستودع 1</option>
                </select>
            </div>
        
            <!-- مربع الاختيار وتسمية اختيار المستودع لكل بند -->
            <div class="form-check d-flex align-items-center">
                <input type="checkbox" class="form-check-input me-2" id="mandatoryCheck">
                <label class="form-check-label mb-0" for="mandatoryCheck" style="margin-right: 20px;">اختيار المستودع لكل بند</label>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="documents" role="tabpanel" aria-labelledby="documents-tab">
        <!-- تبويبات فرعية داخل إرفاق المستندات -->
        <ul class="nav nav-tabs mt-3" id="documentTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="new-document-tab" data-toggle="tab" href="#new-document" role="tab" aria-controls="new-document" aria-selected="true">مستند جديد</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="uploaded-documents-tab" data-toggle="tab" href="#uploaded-documents" role="tab" aria-controls="uploaded-documents" aria-selected="false">الملفات التي تم رفعها مسبقًا</a>
            </li>
        </ul>

        <!-- محتوى التبويبات الفرعية داخل تبويب إرفاق المستندات -->
        <div class="tab-content" id="documentTabsContent">
            <div class="tab-pane fade show active" id="new-document" role="tabpanel" aria-labelledby="new-document-tab">
                <div class="card mt-3">
                    <div class="card-body">
                        <div class="upload-area p-4 border border-dashed text-center">
                            <i class="fas fa-cloud-upload-alt fa-2x text-primary mb-2"></i>
                            <p>أسقط الملف هنا أو اختر من جهازك</p>
                            <input type="file" class="form-control-file" style="display: none;" id="fileUploadInput">
                            <button class="btn btn-primary" onclick="document.getElementById('fileUploadInput').click();">اختر ملف</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="uploaded-documents" role="tabpanel" aria-labelledby="uploaded-documents-tab">
                <div class="card mt-3">
                    <div class="card-body">
                        <!-- الحقل الرئيسي -->
<div class="form-group">
    <label for="documentSelect">المستند</label>
    <div class="d-flex align-items-center">
        <!-- القائمة المنسدلة لاختيار المستند -->
        <select class="form-control w-50" id="documentSelect">
            <option>Select Document</option>
            <option>Document 1</option>
            <option>Document 2</option>
        </select>
        
        <!-- زر "أرفق" -->
        <button class="btn btn-success me-2" style="margin-left: 10px;">
            أرفق
        </button>

        <!-- زر "بحث متقدم" لفتح المودال -->
        <button class="btn btn-success me-2" data-toggle="modal" data-target="#advancedSearchModal" style="margin-left: 10px;">
            <i class="fas fa-search"></i> بحث متقدم
        </button>
    </div>
</div>

<!-- المودال الخاص بالبحث المتقدم -->
<div class="modal fade" id="advancedSearchModal" tabindex="-1" aria-labelledby="advancedSearchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="advancedSearchModalLabel">البحث المتقدم</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- محتوى البحث المتقدم -->
                <div class="alert alert-warning" role="alert">
                    <strong>No Documents found:</strong> click here to clear search
                </div>
                <!-- يمكنك إضافة حقول البحث المتقدم هنا -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">إغلاق</button>
            </div>
        </div>
    </div>
</div>

<!-- تضمين مكتبة Font Awesome و Bootstrap JS -->

                    </div>
                </div>
                
        
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="deposet" role="tabpanel" aria-labelledby="deposet-tab">
        <div id="noRemindersAlert" class="alert alert-warning mt-3" role="alert" style="border: 1px solid orange;">
            <i class="fas fa-exclamation-circle"></i> لم تعد أي تنبيهات آلية حتى الآن 
            <a href="#" class="text-decoration-none" onclick="showReminderForm()">اضغط هنا لإنشاء تنبيه جديد</a>
        </div>
        
        <div class="d-flex justify-content-end mt-3">
            <button class="btn btn-success" onclick="showReminderForm()">
                <i class="fas fa-plus-circle"></i> إضافة تذكير
            </button>
        </div>
<div id="reminderForm" style="display: none;" class="mt-4">
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="bg-light">
                <tr>
                    <th>وقت الإرسال</th>
                    <th>قوالب البريد الإلكتروني</th>
                    <th>الإجراء</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <select class="form-control">
                            <option>اختر متى</option>
                            <!-- خيارات أخرى -->
                        </select>
                    </td>
                    <td class="d-flex align-items-center">
                        <select class="form-control">
                            <option>استخدم القالب الافتراضي</option>
                            <!-- خيارات أخرى -->
                        </select>
                        <button class="btn btn-success ml-2">تعديل</button>
                    </td>
                    <td>
                        <button class="btn btn-danger" onclick="hideReminderForm()">
                            <i class="fas fa-trash-alt"></i> حذف
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    function hideReminderForm() {
        document.getElementById('reminderForm').style.display = 'none'; // إخفاء النموذج
    }
</script>

    </div>
</div>

<script>
    function showReminderForm() {
        document.getElementById('noRemindersAlert').style.display = 'none';
        document.getElementById('reminderForm').style.display = 'block';
    }

    function hideReminderForm() {
        document.getElementById('noRemindersAlert').style.display = 'block';
        document.getElementById('reminderForm').style.display = 'none';
    }

    // إعادة ضبط حالة التبويب عند تغييره
    $('#myTab a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
        if (e.target.id === 'deposet-tab') {
            hideReminderForm();
        }
    });
</script>


<script>
    function showReminderForm() {
        document.getElementById('noRemindersAlert').style.display = 'none'; // إخفاء التنبيه
        document.getElementById('reminderForm').style.display = 'block'; // إظهار النموذج
    }

    function hideReminderForm() {
        document.getElementById('noRemindersAlert').style.display = 'block'; // إظهار التنبيه
        document.getElementById('reminderForm').style.display = 'none'; // إخفاء النموذج
    }
</script>

<!-- روابط Bootstrap و Font Awesome -->
    
        <!-- روابط Bootstrap و Font Awesome -->
    
        

<!-- روابط Bootstrap و Font Awesome -->


</div>

</div>


<h5>الملاحظات/الشروط</h5>
<div class="editor-toolbar d-flex align-items-center">
    <button class="btn btn-light btn-sm"><i class="fas fa-minus"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-link"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-unlink"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-align-left"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-align-center"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-align-right"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-align-justify"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-font"></i></button>
    <select class="form-control form-control-sm mx-2" style="width: 60px;">
        <option>13</option>
        <option>14</option>
        <option>15</option>
    </select>
    <button class="btn btn-light btn-sm"><i class="fas fa-bold"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-italic"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-underline"></i></button>
    <button class="btn btn-light btn-sm"><i class="fas fa-strikethrough"></i></button>
</div>

<div class="editor-content mt-2" contenteditable="true">
    <!-- يمكن للمستخدم الكتابة هنا -->
</div>



<script>
    function addNewRow() {
        // استهداف جسم الجدول
        const tableBody = document.getElementById('invoice-table-body');

        // إنشاء صف جديد
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
            <td><input type="text" class="form-control" placeholder="البند"></td>
            <td><input type="text" class="form-control" placeholder="الوصف"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0%" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><input type="number" class="form-control" placeholder="0.00" oninput="calculateRowTotal(this)"></td>
            <td><span class="row-total">0.00</span></td>
        `;

        // إضافة الصف إلى جسم الجدول
        tableBody.appendChild(newRow);
    }

    function calculateRowTotal(element) {
        const row = element.closest('tr');
        const unitPrice = parseFloat(row.cells[2].querySelector('input').value) || 0;
        const quantity = parseFloat(row.cells[3].querySelector('input').value) || 0;
        const discount = parseFloat(row.cells[4].querySelector('input').value) || 0;
        const tax1 = parseFloat(row.cells[5].querySelector('input').value) || 0;
        const tax2 = parseFloat(row.cells[6].querySelector('input').value) || 0;

        // حساب المجموع للصف
        const total = (unitPrice * quantity) - discount;
        const totalWithTax = total + (total * tax1 / 100) + (total * tax2 / 100);

        row.cells[7].querySelector('.row-total').textContent = totalWithTax.toFixed(2);

        // تحديث الإجمالي الكلي
        updateGrandTotal();
    }

    function updateGrandTotal() {
        let grandTotal = 0;
        document.querySelectorAll('.row-total').forEach(total => {
            grandTotal += parseFloat(total.textContent) || 0;
        });
        document.getElementById('grand-total').textContent = grandTotal.toFixed(2);
    }

</script>
<script>
    function toggleDropdown(inputElement) {
    const dropdownContent = inputElement.nextElementSibling;
    dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';

    // تحديث ارتفاع الجدول عند ظهور القائمة
    const table = document.querySelector('.table-responsive');
    table.style.height = 'auto';
}
</script>
                
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="../js/date.js"></script>
</body>
</html>
